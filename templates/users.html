<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <title>Epsilon Visualizer</title>
</head>
<body>

  <div class="navbar">
    <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/users">For Users</a></li>
        <li><a href="/researchers">For Researchers</a></li>
        <li><a href="/aboutdp">About DP</a></li>
    </ul>
  </div>

    <div class="container">
        <header>
            <h1>Epsilon And You</h1>
        </header>
        <h2>About</h2>
        <details>
          <summary>What is differential privacy?</summary>
          <p>Differential privacy is a technique that the makers of this study are using. If the data is released or queried without restrictions, there is a risk of re-identifying individual participants. To avoid this, the study designers are adding noise to the data to help prevent you from being re-identified in statistical releases.</p>
        </details>
        <details>
          <summary>What is epsilon?</summary>
          <p>Epsilon is a value that researchers can set for their study, that determines the amount of noise and the risk of disclosure. Lower epsilons mean less risk of disclosure, while higher epsilons mean more risk but less noise. The designers of this study will set a specific epsilon.</p>  
        </details>
        <details>
          <summary>What can I do?</summary>
          <p>To understand whether to participate in this study, you can get a senes for the epsilon you are comfortable with in the below interactive graph. If the maximum epsilon/risk you are comfortable with is below the epsilon of this study, don't participate.</p>  
        </details>

        <h2>Risk Assessment</h2>
        <p>Explore disclosure risk at each value of epsilon by moving the slider below - click "Generate Graph" to visualize.</p>
        <div id="slider1">
            Epsilon <input type="range" id="epsilon" min="0" max="10" value="2.5" step="0.05">
        </div>
        <!-- <div id="slider2">
            How much privacy do you like? <input type="range" id="intercept" min="0" max="100" value="50">
        </div> -->
        <div id="submit">
            <button id="submit-button">Generate Graph</button>
        </div>
        <div class="plot-container">
            <img id="plot-image" src="{{ url_for('plot_png') }}?epsilon={{ 2.5 }}" alt="Plot">
        </div>
    </div>
 
<script>
    //slider1 = document.getElementById("slope");
    //slider2 = document.getElementById("intercept");
    button = document.getElementById("submit-button");
    //console.log(slider1.value);

    button.addEventListener('click', function() {
       const epsilon = document.getElementById("epsilon").value;
       //const intercept = document.getElementById("intercept").value; 
       console.log(epsilon);
       //console.log(intercept);
       fetch('/gen_plot', {
        method:'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            epsilon: epsilon
        })
       })
       .then(response => response.json())
       .then(data => {
        const plotImage = document.getElementById('plot-image');
        plotImage.src = data.plot_url;
       })
       .catch((error) => {
        console.error('Error:', error);
    });
    });

    // Best to have a submit button that regenerates graph 


</script>

</body>
</html>